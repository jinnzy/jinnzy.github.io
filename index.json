[{"categories":["docker"],"content":"æ„å»ºå¤šå¹³å°é•œåƒçš„å‡ ç§æ–¹æ³• ","date":"2021-01-07","objectID":"/docker-buildx/:0:0","tags":["buildx","docker"],"title":"ä½¿ç”¨buildxæ„å»ºå¤šå¹³å°é•œåƒ","uri":"/docker-buildx/"},{"categories":["docker"],"content":"QEMUä»¿çœŸ ä½¿ç”¨qemu ä»¿çœŸå‡ºå¾ˆå¤šå¹³å°ï¼Œbuildxé›†æˆäº†è¯¥ç‰¹æ€§ï¼Œå¯ä»¥å®ç°åœ¨å…¶ä»–å¹³å°æ„å»ºä¸éœ€è¦ä¿®æ”¹dockerfile ï¼Œå½“å®ƒéœ€è¦å¯¹ä¸åŒçš„æ¶æ„è¿è¡Œä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œå®ƒä¼šè‡ªå·±ä»binfmt_misc å¤„ç†å™¨ä¸­å·²ç»æ³¨å†Œçš„æ¶æ„å»åŠ è½½å¯¹åº”çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨åœ¨binfmt_miscå¤„ç†å™¨é‡Œå»æ³¨å†Œæˆ‘ä»¬æƒ³è¦çš„æ¶æ„çš„ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»ä½¿ç”¨è¯¥æ–¹æ³•æ¥å®ç°å¤šå¹³å°é•œåƒæ„å»ºã€‚ ","date":"2021-01-07","objectID":"/docker-buildx/:1:0","tags":["buildx","docker"],"title":"ä½¿ç”¨buildxæ„å»ºå¤šå¹³å°é•œåƒ","uri":"/docker-buildx/"},{"categories":["docker"],"content":"ä½¿ç”¨ä¸åŒèŠ‚ç‚¹æ¥æ„å»º è¿™ç§æ–¹å¼æ€§èƒ½è¾ƒå¥½ï¼Œä½†æ˜¯å¹¶æœªé€‰æ‹©è¿™ç§æ–¹å¼ï¼Œå¦‚æœæƒ³æ·±å…¥äº†è§£ï¼Œå¯ä»¥å‚è€ƒå…¶ä»–èµ„æ–™ã€‚ å®˜æ–¹ä¾‹å­ï¼š $ docker buildx create --use --name mybuild node-amd64 mybuild $ docker buildx create --append --name mybuild node-arm64 $ docker buildx build --platform linux/amd64,linux/arm64 . ","date":"2021-01-07","objectID":"/docker-buildx/:2:0","tags":["buildx","docker"],"title":"ä½¿ç”¨buildxæ„å»ºå¤šå¹³å°é•œåƒ","uri":"/docker-buildx/"},{"categories":["docker"],"content":"äº¤å‰ç¼–è¯‘ å¦‚æœå¼€å‘è¯­è¨€å¯¹äº¤å‰ç¼–è¯‘æ”¯æŒè¾ƒå¥½ï¼Œå¯ä»¥ä½¿ç”¨dockerfilesçš„å¤šé˜¶æ®µæ„å»ºï¼Œå¯ä»¥æ„å»ºæ—¶ä¼ å…¥BUILDPLATFORM å’ŒTARGETPLATFORM å‚æ•°é€‰æ‹©è¿è¡Œçš„å¹³å°åŠç¼–è¯‘çš„å¹³å°ã€‚ FROM --platform=$BUILDPLATFORM golang:alpine AS build ARG TARGETPLATFORM ARG BUILDPLATFORM RUN echo \"I am running on $BUILDPLATFORM, building for $TARGETPLATFORM\" \u003e /log FROM alpine COPY --from=build /log /log ä½¿ç”¨buildxæ„å»º ","date":"2021-01-07","objectID":"/docker-buildx/:3:0","tags":["buildx","docker"],"title":"ä½¿ç”¨buildxæ„å»ºå¤šå¹³å°é•œåƒ","uri":"/docker-buildx/"},{"categories":["docker"],"content":"å¼€å¯docker buildx å¼€å¯docker buildxæ’ä»¶ï¼Œè¦æ±‚ç‰ˆæœ¬ä¸ä½äº19.03 ç¬¬ä¸€ç§æ–¹æ³•ä¸´æ—¶å¼€å¯ï¼š $ export DOCKER_CLI_EXPERIMENTAL=enabled ç¬¬äºŒç§æ–¹æ³•ï¼šåœ¨config.json ä¸­å¼€å¯\"experimental\": \"enabled\" $ vim ~/.docker/config.json { ... \"experimental\": \"enabled\" } éªŒè¯ $ docker buildx version github.com/docker/buildx v0.3.1-tp-docker 6db68d029599c6710a32aa7adcba8e5a344795a7 ","date":"2021-01-07","objectID":"/docker-buildx/:4:0","tags":["buildx","docker"],"title":"ä½¿ç”¨buildxæ„å»ºå¤šå¹³å°é•œåƒ","uri":"/docker-buildx/"},{"categories":["docker"],"content":"å¼€å¯binfmt_misc å¦‚æœä½¿ç”¨çš„æ˜¯docker desktopé»˜è®¤æ˜¯å·²ç»å¯ç”¨binfmt_miscçš„äº† å†…æ ¸ç‰ˆæœ¬æœ€å¥½å¤§äº3.xï¼Œæˆ‘è¿™é‡Œç”¨çš„æ˜¯5.xçš„å†…æ ¸ã€‚ è¿™é‡Œä½¿ç”¨docker/binfmt å¼€å¯ç‰¹æƒæ¨¡å¼å¯ç”¨binfmt_misc docker run --privileged --rm docker/binfmt:a7996909642ee92942dcd6cff44b9b95f08dad64 æ£€æŸ¥æ˜¯å¦å¼€å¯æˆåŠŸ $ ls -l /proc/sys/fs/binfmt_misc/ total 0 -rw-r--r--. 1 root root 0 Jan 7 17:41 jexec -rw-r--r--. 1 root root 0 Jan 7 17:43 qemu-aarch64 -rw-r--r--. 1 root root 0 Jan 7 17:43 qemu-arm -rw-r--r--. 1 root root 0 Jan 7 17:43 qemu-ppc64le -rw-r--r--. 1 root root 0 Jan 7 17:43 qemu-riscv64 -rw-r--r--. 1 root root 0 Jan 7 17:43 qemu-s390x --w-------. 1 root root 0 Jan 7 17:41 register -rw-r--r--. 1 root root 0 Jan 7 17:41 status æ£€æŸ¥æ˜¯å¦å¯ç”¨å¤„ç†å™¨ $ grep -r \"enabled\" /proc/sys/fs/binfmt_misc/ /proc/sys/fs/binfmt_misc/qemu-riscv64:enabled /proc/sys/fs/binfmt_misc/qemu-s390x:enabled /proc/sys/fs/binfmt_misc/qemu-ppc64le:enabled /proc/sys/fs/binfmt_misc/qemu-arm:enabled /proc/sys/fs/binfmt_misc/qemu-aarch64:enabled /proc/sys/fs/binfmt_misc/jexec:enabled grep: /proc/sys/fs/binfmt_misc/register: Invalid argument /proc/sys/fs/binfmt_misc/status:enabled ","date":"2021-01-07","objectID":"/docker-buildx/:5:0","tags":["buildx","docker"],"title":"ä½¿ç”¨buildxæ„å»ºå¤šå¹³å°é•œåƒ","uri":"/docker-buildx/"},{"categories":["docker"],"content":"åˆ›å»ºbuilder éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„docker builderï¼Œåç§°å«builder $ docker buildx create --name builder --use builder $ docker buildx ls NAME/NODE DRIVER/ENDPOINT STATUS PLATFORMS builder docker-container builder0 unix:///var/run/docker.sock inactive default * docker default default running linux/amd64, linux/386 è¿™æ—¶å¯ä»¥çœ‹åˆ°ä¸€ä¸ªé»˜è®¤builderå’Œæˆ‘ä»¬æ–°å»ºçš„ä¸€ä¸ªbuilderï¼Œç›®å‰æ–°å»ºçš„builderè¿˜å¤„äºinactiveçš„çŠ¶æ€ã€‚ é€šè¿‡å¦‚ä¸‹æ–¹å¼å¯åŠ¨æ–°çš„builderã€‚ $ docker buildx inspect builder --bootstrap [+] Building 63.8s (1/1) FINISHED =\u003e [internal] booting buildkit 63.8s =\u003e =\u003e pulling image moby/buildkit:buildx-stable-1 61.9s =\u003e =\u003e creating container buildx_buildkit_builder0 1.9s Name: builder Driver: docker-container Nodes: Name: builder0 Endpoint: unix:///var/run/docker.sock Status: running Platforms: linux/amd64, linux/arm64, linux/riscv64, linux/ppc64le, linux/s390x, linux/386, linux/arm/v7, linux/arm/v6 ","date":"2021-01-07","objectID":"/docker-buildx/:6:0","tags":["buildx","docker"],"title":"ä½¿ç”¨buildxæ„å»ºå¤šå¹³å°é•œåƒ","uri":"/docker-buildx/"},{"categories":["docker"],"content":"æ„å»ºå¤šå¹³å°é•œåƒ å½“å‰ç›®å½•ç»“æ„ï¼š $ tree â”œâ”€â”€ Dockerfile â””â”€â”€ test.go Dockerfile: FROM golang:1.15-alpine AS builder WORKDIR /opt RUN go build -o test . FROM alpine WORKDIR /opt COPY --from=builder /opt/test . CMD [\"./test\"] test.go package main import ( \"fmt\" ) func main() { fmt.Println(\"test\") } å¼€å§‹æ„å»ºå¹¶ä¸Šä¼ ï¼Œæ³¨æ„harbor ç‰ˆæœ¬è¦åœ¨2.0 ä»¥ä¸Šæ‰æ”¯æŒã€‚ $ docker buildx build -t reg.xxxxxx.cn/app/test-golang:v1 --platform=linux/arm64,linux/amd64 . [+] Building 5.2s (22/22) FINISHED =\u003e [internal] load build definition from Dockerfile 0.0s =\u003e =\u003e transferring dockerfile: 92B 0.0s =\u003e [internal] load .dockerignore 0.0s =\u003e =\u003e transferring context: 2B 0.0s =\u003e [linux/amd64 internal] load metadata for docker.io/library/alpine:latest 2.3s =\u003e [linux/amd64 internal] load metadata for docker.io/library/golang:1.15-alpine 2.0s =\u003e [linux/arm64 internal] load metadata for docker.io/library/alpine:latest 3.1s =\u003e [linux/arm64 internal] load metadata for docker.io/library/golang:1.15-alpine 2.1s =\u003e [linux/amd64 builder 1/4] FROM docker.io/library/golang:1.15-alpine@sha256:49b4eac11640066bc72c74b70202478b7d431c7d8918e0973d6e4aeb8b3129d2 0.0s =\u003e =\u003e resolve docker.io/library/golang:1.15-alpine@sha256:49b4eac11640066bc72c74b70202478b7d431c7d8918e0973d6e4aeb8b3129d2 0.0s =\u003e [linux/arm64 stage-1 1/3] FROM docker.io/library/alpine@sha256:3c7497bf0c7af93428242d6176e8f7905f2201d8fc5861f45be7a346b5f23436 0.1s =\u003e =\u003e resolve docker.io/library/alpine@sha256:3c7497bf0c7af93428242d6176e8f7905f2201d8fc5861f45be7a346b5f23436 1.8s =\u003e [linux/arm64 builder 1/4] FROM docker.io/library/golang:1.15-alpine@sha256:49b4eac11640066bc72c74b70202478b7d431c7d8918e0973d6e4aeb8b3129d2 0.1s =\u003e =\u003e resolve docker.io/library/golang:1.15-alpine@sha256:49b4eac11640066bc72c74b70202478b7d431c7d8918e0973d6e4aeb8b3129d2 0.0s =\u003e [linux/amd64 stage-1 1/3] FROM docker.io/library/alpine@sha256:3c7497bf0c7af93428242d6176e8f7905f2201d8fc5861f45be7a346b5f23436 0.1s =\u003e =\u003e resolve docker.io/library/alpine@sha256:3c7497bf0c7af93428242d6176e8f7905f2201d8fc5861f45be7a346b5f23436 0.0s =\u003e [internal] load build context 0.0s =\u003e =\u003e transferring context: 178B 0.0s =\u003e CACHED [linux/amd64 stage-1 2/3] WORKDIR /opt 0.0s =\u003e CACHED [linux/amd64 builder 2/4] WORKDIR /opt 0.0s =\u003e CACHED [linux/amd64 builder 3/4] ADD . /opt/ 0.0s =\u003e CACHED [linux/amd64 builder 4/4] RUN go build -o test . 0.0s =\u003e CACHED [linux/amd64 stage-1 3/3] COPY --from=builder /opt/test . 0.0s =\u003e CACHED [linux/arm64 stage-1 2/3] WORKDIR /opt 0.0s =\u003e CACHED [linux/arm64 builder 2/4] WORKDIR /opt 0.0s =\u003e CACHED [linux/arm64 builder 3/4] ADD . /opt/ 0.0s =\u003e CACHED [linux/arm64 builder 4/4] RUN go build -o test . 0.0s =\u003e CACHED [linux/arm64 stage-1 3/3] COPY --from=builder /opt/test . 0.0s =\u003e exporting to image 1.8s =\u003e =\u003e exporting layers 0.6s =\u003e =\u003e exporting manifest sha256:714e4f18895bb698c65392eda3b39e35b38df0e84c34ce1f604bfa8fdb466a77 0.0s =\u003e =\u003e exporting config sha256:0339ab69edd09e4038046c8c056305733f050918725b6f265780189c0bdd76e3 0.0s =\u003e =\u003e exporting manifest sha256:a5c4695278c99a1801c557e68145d7a1e61fa82288a9d2b43b1f85219dea5b8a 0.0s =\u003e =\u003e exporting config sha256:a69d7dfa854e466d743d09c3c95ebca68f2feb6cb335bc0aecc4a256cc95e68f 0.0s =\u003e =\u003e exporting manifest list sha256:77677ebebf2dda103c6cd8598018a1d9bb79e06102173588fef5c501e81f6cb3 0.0s =\u003e =\u003e pushing layers 0.5s =\u003e =\u003e pushing manifest for reg.xxxxxx.cn/app/test-golang:v1 é‡åˆ°çš„é”™è¯¯ ","date":"2021-01-07","objectID":"/docker-buildx/:7:0","tags":["buildx","docker"],"title":"ä½¿ç”¨buildxæ„å»ºå¤šå¹³å°é•œåƒ","uri":"/docker-buildx/"},{"categories":["docker"],"content":"ä¸Šä¼ é•œåƒæ—¶x509: certificate signed by unknown authority å®Œæ•´æŠ¥é”™ï¼š failed to solve: rpc error: code = Unknown desc = failed to do request: Head [https://reg.xxxxxx.cn/v2/app/test-golang/blobs/sha256:0c1f186a05c7a4d0cb23b4a339473c5e96115be11f4deb24f74d3f2324120c87:](https://reg.xxxxxx.cn/v2/app/test-golang/blobs/sha256:0c1f186a05c7a4d0cb23b4a339473c5e96115be11f4deb24f74d3f2324120c87:) x509: certificate signed by unknown authority è¿™æ˜¯å› ä¸ºå…¬å¸æ‰€ç”¨çš„harborè¯ä¹¦æ˜¯è‡ªç­¾åè¯ä¹¦ï¼Œæš‚æ—¶çš„è§£å†³æ–¹æ³•æ˜¯å°†harborè¯ä¹¦åŠ åˆ°builderå®¹å™¨ä¸­ã€‚ $ BUILDER=$(docker ps | grep buildkitd | awk '{print $1}') $ docker cp ./harbor.crt $BUILDER:/usr/local/share/ca-certificates/ # harbor.crtä¸ºharbor caè¯ä¹¦ $ sudo docker exec $BUILDER update-ca-certificates $ sudo docker restart $BUILDER é‡æ–°ä¸Šä¼ é•œåƒå³å¯ã€‚ å‚è€ƒé“¾æ¥ https://docs.docker.com/buildx/working-with-buildx/ https://zhuanlan.zhihu.com/p/227048978 https://github.com/docker/buildx/issues/80 ","date":"2021-01-07","objectID":"/docker-buildx/:8:0","tags":["buildx","docker"],"title":"ä½¿ç”¨buildxæ„å»ºå¤šå¹³å°é•œåƒ","uri":"/docker-buildx/"},{"categories":["hugo"],"content":"hugoåˆä½“éªŒ ","date":"2021-01-01","objectID":"/hugo-blog/:0:0","tags":["hugo"],"title":"ä½¿ç”¨hugoæ¥æ­å»ºä¸ªäººåšå®¢","uri":"/hugo-blog/"},{"categories":["hugo"],"content":"å®‰è£…hugo ä¸‹è½½é“¾æ¥ æˆ‘è¿™é‡Œé€‰æ‹©çš„æœ€æ–°ç‰ˆæœ¬v0.80.0ï¼Œé€‰æ‹©æ“ä½œç³»ç»Ÿå¯¹åº”çš„ç‰ˆæœ¬å³å¯ï¼Œæˆ‘è¿™é‡Œæ˜¯é€‰çš„win10 64ä½çš„ã€‚ ä¸‹è½½åå°†hugo.exeåŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œæˆ‘æ˜¯ä¹ æƒ¯åˆ›å»ºä¸€ä¸ªbinç›®å½•ï¼Œå°†å¯æ‰§è¡Œæ–‡ä»¶éƒ½æ”¾åˆ°è¿™é‡Œã€‚ ps ä¸‹è½½çš„æ—¶å€™å‘ç°é“¾æ¥ç«Ÿç„¶æ‰“ä¸å¼€äº†ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ hostsè§£å†³ # github 199.232.96.133 avatars0.githubusercontent.com 199.232.96.133 avatars1.githubusercontent.com 199.232.96.133 avatars2.githubusercontent.com 199.232.96.133 avatars3.githubusercontent.com 199.232.96.133 avatars4.githubusercontent.com 199.232.96.133 avatars5.githubusercontent.com 199.232.96.133 avatars6.githubusercontent.com 199.232.96.133 avatars7.githubusercontent.com 199.232.96.133 avatars8.githubusercontent.com 199.232.96.133 user-images.githubusercontent.com ","date":"2021-01-01","objectID":"/hugo-blog/:1:0","tags":["hugo"],"title":"ä½¿ç”¨hugoæ¥æ­å»ºä¸ªäººåšå®¢","uri":"/hugo-blog/"},{"categories":["hugo"],"content":"åˆ›å»ºä¸€ä¸ªhugoé¡¹ç›® $ hugo.exe new site jinnzy.github.io.source ","date":"2021-01-01","objectID":"/hugo-blog/:2:0","tags":["hugo"],"title":"ä½¿ç”¨hugoæ¥æ­å»ºä¸ªäººåšå®¢","uri":"/hugo-blog/"},{"categories":["hugo"],"content":"å®‰è£…ä¸»é¢˜ è¿™é‡Œæœ‰ä¸¤ç§æ–¹æ³•æˆ‘é‡‡ç”¨çš„ç¬¬ä¸€ç§æ–¹æ³•ï¼Œæ¯”è¾ƒæ–¹ä¾¿ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥ç›´æ¥ä¿®æ”¹ã€‚ ç¬¬ä¸€ç§ï¼šä¸‹è½½æœ€æ–°çš„å‹ç¼©åŒ…æˆ–ç›´æ¥cloneåˆ°themesç›®å½• $ cd jinnzy.github.io.source $ git clone https://github.com/dillonzq/LoveIt.git themes/LoveIt ç¬¬äºŒç§ï¼šä½¿ç”¨å­æ¨¡å—æ¥å®‰è£… $ cd jinnzy.github.io.source $ git init $ git submodule add https://github.com/dillonzq/LoveIt.git themes/LoveIt ","date":"2021-01-01","objectID":"/hugo-blog/:3:0","tags":["hugo"],"title":"ä½¿ç”¨hugoæ¥æ­å»ºä¸ªäººåšå®¢","uri":"/hugo-blog/"},{"categories":["hugo"],"content":"ä¿®æ”¹é…ç½® ä½ç½®ï¼š./config.toml å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ä¸­3.1çš„ç¤ºä¾‹é…ç½®ï¼Œç”±äºå¤ªå¤§è¿™é‡Œå°±ä¸è´´å‡ºæ¥äº† åœ¨è¿™ä¸ªåŸºç¡€ä¸Šæˆ‘é¢å¤–ä¿®æ”¹äº†ä»¥ä¸‹å‡ ä¸ªé…ç½®ï¼Œå…¶ä½™çš„å°±æ˜¯ä¸€äº›ç½‘ç«™æ ‡é¢˜æè¿°ç­‰çš„å°±ä¸å¤šè¯´äº†ã€‚ # æ˜¯å¦ä½¿ç”¨ git ä¿¡æ¯ enableGitInfo = true [params] gitRepo = \"jinnzy.github.io.source\" [markup] # ç›®å½•è®¾ç½® [markup.tableOfContents] # ä»1ä¸ª#å¼€å§‹ç®—æ ‡é¢˜ï¼Œé»˜è®¤æ˜¯ä¸¤ä¸ª#å¼€å§‹ç®—æ ‡é¢˜ startLevel = 1 endLevel = 6 ","date":"2021-01-01","objectID":"/hugo-blog/:4:0","tags":["hugo"],"title":"ä½¿ç”¨hugoæ¥æ­å»ºä¸ªäººåšå®¢","uri":"/hugo-blog/"},{"categories":["hugo"],"content":"ä¿®æ”¹æ–‡ç« é»˜è®¤çš„æ¨¡æ¿ ä½ç½®ï¼š./archetypes/default.md ---title:\"{{ replace .Name \"-\" \"\" | title }}\"date:{{.Date }}draft:falsetoc:truetags:- \"\"categories:- \"\"--- åŠ å…¥äº†ç›®å½•æ ‡ç­¾å’Œåˆ†ç±»ç­‰ã€‚ ","date":"2021-01-01","objectID":"/hugo-blog/:5:0","tags":["hugo"],"title":"ä½¿ç”¨hugoæ¥æ­å»ºä¸ªäººåšå®¢","uri":"/hugo-blog/"},{"categories":["hugo"],"content":"åˆ›å»ºç¬¬ä¸€ç¯‡æ–‡ç«  $ hugo new posts/hugo-blog-1.md å¯åŠ¨è¿›è¡Œæµ‹è¯•ï¼Œä¼šæŠ¥é”™ $ hugo server -D Â·Â·Â· Error: Error building site: failed to render pages: render of \"page\" failed: execute of template failed: template: posts/single.html:92:124: executing \"content\" at \u003cpartial \"function/content.html\"\u003e: error calling partial: \"/Users/tc/Documents/workspace_2020/blog/themes/loveIt/layouts/partials/function/content.html:15:15\": execute of template failed: template: partials/function/content.html:15:15: executing \"partials/function/content.html\" at \u003cpartial \"function/checkbox.html\" $content\u003e: error calling partial: partial that returns a value needs a non-zero argument. -Dä¸åŠ ä¹Ÿå¯ä»¥ï¼Œå› ä¸ºå‰é¢å·²ç»è®¾ç½® draft: false äº†ã€‚ è¿™é‡ŒæŠ¥é”™æ˜¯ä¸€ä¸ªbugï¼Œå·²ç»æœ‰äººprä½†æ˜¯å¹¶æœªåˆå¹¶è¿›æ¥ï¼Œæ‰€ä»¥è¦è‡ªå·±æ‰‹åŠ¨ä¿®æ”¹ä¸€ä¸‹ã€‚ ä¿®æ”¹æ–‡ä»¶ï¼šthemes/loveIt/layouts/partials/function/content.html ä¿®æ”¹åå¦‚ä¸‹ {{- $content := .Content -}} {{- if ne \"\" $content -}} {{- if .Ruby -}} {{- $content = partial \"function/ruby.html\" $content -}} {{- end -}} {{- if .Fraction -}} {{- $content = partial \"function/fraction.html\" $content -}} {{- end -}} {{- if .Fontawesome -}} {{- $content = partial \"function/fontawesome.html\" $content -}} {{- end -}} {{- $content = partial \"function/checkbox.html\" $content -}} {{- $content = partial \"function/escape.html\" $content -}} {{- end -}} {{- return $content -}} éšåå†æ¬¡å¯åŠ¨ï¼Œè¿›å…¥http://localhost:1313 å°±å¯ä»¥çœ‹åˆ°åšå®¢é¦–é¡µäº†ã€‚ åˆ©ç”¨github pageséƒ¨ç½²blog å‰ç½®æ¡ä»¶ï¼šéœ€è¦å®‰è£…git ","date":"2021-01-01","objectID":"/hugo-blog/:6:0","tags":["hugo"],"title":"ä½¿ç”¨hugoæ¥æ­å»ºä¸ªäººåšå®¢","uri":"/hugo-blog/"},{"categories":["hugo"],"content":"åˆ›å»ºgithubä»“åº“ ç™»å½•githubåˆ›å»ºåº“ æˆ‘è¿™é‡Œæ˜¯åˆ›å»ºäº†ä¸¤ä¸ªåº“ jinnzy.github.io.source é€‰æ‹©çš„æ˜¯ç§æœ‰åº“(Private)å­˜æ”¾hugoæºæ–‡ä»¶ï¼Œåˆ©ç”¨github actionsæ¥ç¼–è¯‘ç”Ÿæˆé™æ€æ–‡ä»¶æ¨é€åˆ°jinnzy.github.ioåº“ä¸­ jinnzy.github.io é€‰æ‹©çš„æ˜¯å…¬å…±åº“(Public)å­˜æ”¾hugoç¼–è¯‘åçš„é™æ€é¡µé¢ï¼Œä¸»è¦æ˜¯é€šè¿‡github pagesåŠŸèƒ½è®¿é—®è¿™äº›é™æ€æ–‡ä»¶ã€‚ ","date":"2021-01-01","objectID":"/hugo-blog/:7:0","tags":["hugo"],"title":"ä½¿ç”¨hugoæ¥æ­å»ºä¸ªäººåšå®¢","uri":"/hugo-blog/"},{"categories":["hugo"],"content":"é…ç½®github ssh key ç”Ÿæˆssk key $ ssh-keygen Generating public/private rsa key pair. Enter file in which to save the key (/root/.ssh/id_rsa): Enter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in /root/.ssh/id_rsa. Your public key has been saved in /root/.ssh/id_rsa.pub. The key fingerprint is: 53:0e:0b:0f:c0:b8:d3:4f:e1:8a:a8:5d:8c:8f:98:cf jinzhy@vlnx107005.firstshare.cn The key's randomart image is: +--[ RSA 2048]----+ | o. | | . ... | | o .o.. . | | o . o+ = | | . = + S . | |. o + . . | |.+ + | |+.o . | | .E | +-----------------+ /root/.ssh/id_rsa ç§é’¥ /root/.ssh/id_rsa.pub å…¬é’¥ æ‰“å¼€jinnzy.github.io.source åº“æ·»åŠ Secrets ï¼Œåç§°ä¸ºACTIONS_DEPLOY_KEYï¼Œå°†/root/.ssh/id_rsaçš„å†…å®¹å¤åˆ¶è¿›å» æ‰“å¼€jinnzy.github.io åº“æ·»åŠ Deploy keys ï¼Œåç§°éšä¾¿éƒ½è¡Œï¼Œå°†/root/.ssh/id_rsa.pubçš„å†…å®¹å¤åˆ¶è¿›å»ã€‚ ","date":"2021-01-01","objectID":"/hugo-blog/:8:0","tags":["hugo"],"title":"ä½¿ç”¨hugoæ¥æ­å»ºä¸ªäººåšå®¢","uri":"/hugo-blog/"},{"categories":["hugo"],"content":"é…ç½®github actions æ‰“å¼€jinnzy.github.io.sourceï¼Œåˆ›å»ºActions å…¨éƒ¨å†…å®¹å¦‚ä¸‹ï¼š name:Deploy Hugo Site to Github Pages on Main Branchon:push:branches:- mainjobs:build-deploy:runs-on:ubuntu-18.04steps:- uses:actions/checkout@v2- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:'0.80.0'extended:true# ä½¿ç”¨æ‰©å±•ç‰ˆ- name:Buildrun:hugo --minify- name:Deployuses:peaceiris/actions-gh-pages@v3with:deploy_key:${{ secrets.ACTIONS_DEPLOY_KEY }}# è¿™é‡Œçš„ ACTIONS_DEPLOY_KEY åˆ™æ˜¯ä¸Šé¢è®¾ç½® Private Keyçš„å˜é‡åexternal_repository:jinnzy/jinnzy.github.io# Pages è¿œç¨‹ä»“åº“ publish_dir:./publickeep_files:false# remove existing filespublish_branch:main # deploying branchcommit_message:${{ github.event.head_commit.message }} ","date":"2021-01-01","objectID":"/hugo-blog/:9:0","tags":["hugo"],"title":"ä½¿ç”¨hugoæ¥æ­å»ºä¸ªäººåšå®¢","uri":"/hugo-blog/"},{"categories":["hugo"],"content":"ä¸Šä¼ hugoé¡¹ç›®ä¼ åˆ°github å½“å‰æ‰€åœ¨ç›®å½•ï¼š./jinzhy.github.io.source $ git init $ git commit -m \"first commit\" $ git branch -M main $ git remote add origin https://github.com/jinnzy/jinzhy.github.io.source.git $ git pull # å…ˆæŠŠä¹‹å‰æäº¤çš„çš„å†…å®¹æ‹‰å–ä¸‹æ¥ $ git push -u origin main è¿›å…¥Actions å¯ä»¥çœ‹åˆ°ä¸Šä¼ æˆåŠŸäº† æ‰“å¼€jinzhy.github.io é¡¹ç›® ä¸‹æ‹‰æ‰¾åˆ°GitHub Pages å¯ä»¥çœ‹åˆ°å‘å¸ƒåœ°å€ï¼Œè¿™æ—¶è®¿é—®https://jinnzy.github.io å°±å¯ä»¥çœ‹åˆ°åšå®¢äº†ã€‚ ConsoleæŠ¥é”™æ‰¾ä¸åˆ°/site.webmanifest å¼•ç”¨è‡ªlewky.cnåšå®¢ä¸­çš„å†…å®¹ã€‚ è¯¥æ–‡ä»¶å’ŒProgressive web applications (PWA)æœ‰å…³ï¼Œé€šè¿‡æ·»åŠ PWAåˆ°Hugoç«™ç‚¹ï¼Œå¯ä»¥å®ç°ç¦»çº¿è®¿é—®çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯è¯´æ–­ç½‘çŠ¶æ€ä¸‹ä¾ç„¶å¯ä»¥è®¿é—®åˆ°ä½ ä¹‹å‰è®¿é—®è¿‡çš„ç½‘é¡µï¼Œæ¢è¨€ä¹‹å°±æ˜¯é€šè¿‡PWAæ¥å°†è®¿é—®è¿‡çš„ç½‘é¡µèµ„æºç¼“å­˜åˆ°äº†æœ¬åœ°ï¼Œæ‰€ä»¥æ–­ç½‘ä¸‹ä»ç„¶å¯ä»¥ç»§ç»­è®¿é—®ç½‘ç«™ã€‚å½“ç„¶ï¼Œæ¢å¤ç½‘ç»œæ—¶ä¼šè‡ªåŠ¨æ›´æ–°æœ€æ–°çš„é¡µé¢èµ„æºã€‚ ä½†æ˜¯ç›®å‰è¯¥åŠŸèƒ½è¿˜ä¸å¤Ÿå®Œå–„ï¼Œå¯èƒ½å­˜åœ¨ç€å®‰å…¨æ€§çš„é—®é¢˜ï¼Œå¹¶ä¸”å®ç°è¿‡ç¨‹ä¹Ÿæ¯”è¾ƒç¹æ‚ï¼Œæœ€ç»ˆè¿˜æ˜¯å†³å®šæŠŠè¿™ä¸ªå¼•ç”¨ç»™å»æ‰ï¼Œåšæ³•å¦‚ä¸‹ï¼š æŠŠåšå®¢ä¸»é¢˜ç›®å½•ä¸‹çš„\\themes\\LoveIt\\layouts\\partials\\head\\link.htmlæ‹·è´åˆ°æ ¹ç›®å½•ä¸‹çš„\\layouts\\partials\\head\\link.html æ‰“å¼€æ‹·è´åçš„link.htmlï¼ŒæŠŠ\u003clink rel=\"manifest\" href=\"/site.webmanifest\"\u003eåˆ æ‰æˆ–è€…æ³¨é‡Šæ‰ï¼š {{- /* \u003clink rel=\"manifest\" href=\"/site.webmanifest\"\u003e */ -}} æ·»åŠ å‹é“¾ æ³¨æ„ï¼šå‚è€ƒäº†Referenceä¸­çš„å‡ ç¯‡æ–‡ç« æ·»åŠ å‹é“¾ï¼Œå‘ç°cssæ ·å¼æ€»æ˜¯ä¸ç”Ÿæ•ˆï¼ŒæŸ¥äº†ä¸€ä¸‹åˆæ‰åœ¨è¿™ä¸ªprä¸­å‘ç°loveit ä¸»é¢˜æŸäº›åŠŸèƒ½éœ€è¦æŠŠscss è½¬æ¢ä¸ºcss æ‰€ä»¥è¦é€‰æ‹©æ‰©å±•ç‰ˆä¸‹è½½ï¼Œæ‰€ä»¥åˆé‡æ–°ä¸‹è½½äº†hugo_extended_0.80.0_Windows-64bit è¿™ä¸ªç‰ˆæœ¬ğŸ˜­ã€‚ ä¸»è¦ä½¿ç”¨kkkgo/hugo-friendlinksé¡¹ç›®ä¸­çš„ä»£ç ã€‚ ","date":"2021-01-01","objectID":"/hugo-blog/:10:0","tags":["hugo"],"title":"ä½¿ç”¨hugoæ¥æ­å»ºä¸ªäººåšå®¢","uri":"/hugo-blog/"},{"categories":["hugo"],"content":"æ·»åŠ å‹é“¾æ ·å¼ ä½ç½®ï¼šjinnzh.github.io.source/assets/css/_custom.scss // friendslink .myfriends { text-align: center; background-color: #fff; opacity: 0.9; } .myfriends a { color: black; } .myfriends p { display: none; } .friendurl { text-decoration: none !important; color: black; } .myfriend { width: 56px !important; height: 56px !important; border-radius: 50%; border: 1px solid #ddd; padding: 2px; box-shadow: 1px 1px 1px rgba(0,0,0, .15); margin-top: -12px !important; margin-left: 10px !important; background-color: #fff; } .frienddiv { position: relative; left: 0; right: 0; width: 100%; height: 70px; line-height: 1.38; margin-top: -5px; margin-bottom: -5px; border-radius: 5px; background: rgba(255, 255, 255, .2); box-shadow: 4px 4px 2px 1px rgba(0, 0, 255, .2); overflow: hidden; } .frienddiv:hover { background: rgba(87, 142, 224, 0.15); } .frienddiv:hover .frienddivleft img { transition: .9s!important; -webkit-transition: .9s!important; -moz-transition: .9s!important; -o-transition: .9s!important; -ms-transition: .9s!important; transform: rotate(360deg)!important; -webkit-transform: rotate(360deg)!important; -moz-transform: rotate(360deg)!important; -o-transform: rotate(360deg)!important; -ms-transform: rotate(360deg)!important; } .frienddivleft { width: 92px; float: left; } .frienddivleft { margin-top: 15px; margin-right: 2px; } .frienddivright { margin-top: 15px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; } ","date":"2021-01-01","objectID":"/hugo-blog/:11:0","tags":["hugo"],"title":"ä½¿ç”¨hugoæ¥æ­å»ºä¸ªäººåšå®¢","uri":"/hugo-blog/"},{"categories":["hugo"],"content":"åˆ›å»ºshortcodeså‹é“¾æ–‡ä»¶ ä½ç½®ï¼šjinnzh.github.io.source/layouts/shortcodes/friend.html {{ if .IsNamedParams }} \u003cp\u003e\u003catarget=\"_blank\" href={{ .Get \"url\" }} title={{ .Get \"name\" }} class=\"friendurl\"\u003e \u003cdivclass=\"frienddiv\"\u003e \u003cdivclass=\"frienddivleft\"\u003e \u003cimgclass=\"myfriend\" src={{ .Get \"logo\" }} /\u003e \u003c/div\u003e \u003cdivclass=\"frienddivright\"\u003e {{ .Get \"name\" }}\u003cbr /\u003e{{ .Get \"word\" }} \u003c/div\u003e \u003c/div\u003e \u003c/a\u003e \u003c/p\u003e {{ end }} ","date":"2021-01-01","objectID":"/hugo-blog/:12:0","tags":["hugo"],"title":"ä½¿ç”¨hugoæ¥æ­å»ºä¸ªäººåšå®¢","uri":"/hugo-blog/"},{"categories":["hugo"],"content":"åˆ›å»ºfriend mdæ–‡ä»¶ ä½ç½®ï¼šjinnzh.github.io.source/content/friends.md --- hiddenFromSearch: true --- # å‹é“¾ {{\u003cfriendname=\"Dillon\" url=\"https://github.com/dillonzq/\" logo=\"https://avatars0.githubusercontent.com/u/30786232?s=460\u0026u=5fc878f67c869ce6628cf65121b8d73e1733f941\u0026v=4\" word=\"LoveItä¸»é¢˜ä½œè€…\" \u003e}} è¿™é‡Œçš„friend æ˜¯å¼•ç”¨ä¸Šä¸ªæ­¥éª¤ä¸­åˆ›å»ºçš„friend shortcodes ","date":"2021-01-01","objectID":"/hugo-blog/:13:0","tags":["hugo"],"title":"ä½¿ç”¨hugoæ¥æ­å»ºä¸ªäººåšå®¢","uri":"/hugo-blog/"},{"categories":["hugo"],"content":"èœå•ä¸­æ·»åŠ å‹é“¾ ä½ç½®ï¼šjinnzh.github.io.source/config.toml [menu] [[menu.main]] identifier= \"friends\" pre= \"\" post= \"\" name= \"å‹é“¾\" url= \"/friends/\" title= \"\" weight= 4 weightæŒ‰èœå•é¡ºåºå¾€ä¸‹æ’å³å¯ã€‚ æœ€ç»ˆæ•ˆæœ æ·»åŠ ä¸è’œå­ï¼Œå±•ç¤ºç½‘ç«™è®¿é—®äººæ•° è¿™é‡Œçš„æ“ä½œéƒ½åœ¨jinnzy.github.io.source é¡¹ç›®å†…æ“ä½œ å¤åˆ¶baseof.html æ–‡ä»¶ $ mkdir -p ./layouts/_default # æ²¡æœ‰ç›®å½•åˆ™åˆ›å»º $ cp themes/LoveIt/layouts/_default/baseof.html layouts/_default/baseof.html æ‰“å¼€åˆšå¤åˆ¶çš„layouts/_default/baseof.html ï¼Œæ·»åŠ \u003cscript async src=\"//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js\"\u003e\u003c/script\u003e ï¼Œå¼•å…¥ä¸è’œå­jsæ–‡ä»¶ {{- partial \"init.html\" . -}} \u003c!DOCTYPE html\u003e \u003chtml lang=\"{{ .Site.LanguageCode }}\"\u003e \u003chead\u003e \u003cscript async src=\"//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js\"\u003e\u003c/script\u003e \u003cmeta charset=\"utf-8\"\u003e \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003e \u003cmeta name=\"robots\" content=\"noodp\" /\u003e \u003cmeta http-equiv=\"X-UA-Compatible\" content=\"IE=edge, chrome=1\"\u003e \u003ctitle\u003e {{- block \"title\" . }}{{ .Site.Title }}{{ end -}} \u003c/title\u003e {{- partial \"head/meta.html\" . -}} {{- partial \"head/link.html\" . -}} {{- partial \"head/seo.html\" . -}} \u003c/head\u003e ... æ‰“å¼€config.toml ï¼Œä¿®æ”¹ä»¥ä¸‹é…ç½® [params.footer] enable = true # è‡ªå®šä¹‰å†…å®¹ (æ”¯æŒ HTML æ ¼å¼) custom = '\u003cspan id=\"busuanzi_container_site_pv\"\u003eæœ¬ç«™æ€»è®¿é—®é‡\u003cspan id=\"busuanzi_value_site_pv\"\u003e\u003c/span\u003eæ¬¡\u003c/span\u003e â€¢ \u003cspan id=\"busuanzi_container_site_uv\"\u003eè®¿å®¢æ•°\u003cspan id=\"busuanzi_value_site_uv\"\u003e\u003c/span\u003eäººæ¬¡\u003c/span\u003e' æœ€ç»ˆæ•ˆæœï¼š ç”±äºæ˜¯æœ¬åœ°æµ‹è¯•ï¼ŒåŸŸåéƒ½æ˜¯localhostæ‰€ä»¥æ˜¾ç¤ºè¿™ä¹ˆå¤§çš„é‡æ˜¯æ­£å¸¸çš„ï¼Œå‘å¸ƒåä½¿ç”¨çœŸå®åŸŸåæ•°é‡å°±ä¼šæ˜¾ç¤ºæ­£å¸¸ ä½¿ç”¨valineä½œä¸ºè¯„è®ºç³»ç»Ÿ ç™»å½•æˆ–æ³¨å†Œleancloudï¼Œç‚¹å‡»å·¦ä¸Šè§’åˆ›å»ºåº”ç”¨ã€‚ åˆ›å»ºå¥½ä¹‹åï¼Œè¿›å…¥åº”ç”¨ï¼Œé€‰æ‹©è®¾ç½® \u003eåº”ç”¨Keysï¼Œè·å–AppID å’ŒApp Key ã€‚ æ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„config.tomlï¼Œå¡«å…¥ä¸Šä¸ªæ­¥éª¤è·å–çš„AppID å’ŒApp Keyã€‚ [params.page.comment] enable = true [params.page.comment.valine] enable = true appId = \"xxxxx\" appKey = \"xxxxx\" è¿è¡Œé¡¹ç›®è¿›è¡Œæµ‹è¯•ï¼Œè®¾ç½®å˜é‡ä¸ºproduction ç¯å¢ƒï¼Œé»˜è®¤æ˜¯dev ä¸æ˜¾ç¤ºè¯„è®ºç­‰ç³»ç»Ÿã€‚ $ hugo server --environment production è¿›å…¥æ–‡ç« ï¼Œçœ‹æœ€åº•éƒ¨å·²ç»æœ‰è¯„è®ºå‡ºç°äº†ã€‚ å‚è€ƒèµ„æ–™ https://lewky.cn/tags/hugo/ https://hugoloveit.com/zh-cn/categories/ kkkgo/hugo-friendlinkså‹é“¾ loveitè‡ªå®šä¹‰æ ·å¼ ä¸è’œå­ https://valine.js.org/quickstart.html ","date":"2021-01-01","objectID":"/hugo-blog/:14:0","tags":["hugo"],"title":"ä½¿ç”¨hugoæ¥æ­å»ºä¸ªäººåšå®¢","uri":"/hugo-blog/"}]